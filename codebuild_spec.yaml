version: 0.2

phases:
  install:
    commands:
      - apk update
      - apk upgrade
      - apk add --no-cache bash git openssl
  pre_build:
    commands:
      - wget https://raw.githubusercontent.com/AwsLambdaContinuousDelivery/lambdaCICDBuilder/master/createCF.py
      - pip3 install git+https://github.com/jpotecki/TroposphereWrapper.git
  build:
    commands:
      - python3 createCF.py --path $(pwd)/ --stage PROD >> stackPROD.json
      - python3 createCF.py --path $(pwd)/ --stage Alpha >> stackAlpha.json
artifacts:
  files:
    - stackPROD.json
    - stackAlpha.json